<!DOCTYPE html>
<html>
<head>
    <title>Game 3 - Dual Sensor</title>
    <style>
        body { font-family: sans-serif; text-align: center; }
        #game-container { width: 500px; height: 300px; border: 1px solid black; margin: 20px auto; display: flex; justify-content: space-around; align-items: center; }
        .hand { width: 100px; height: 100px; border-radius: 50%; }
        #left-hand { background-color: red; }
        #right-hand { background-color: green; }
    </style>
</head>
<body>
    <h1>Game 3 - Dual Sensor</h1>
    <div id="game-container">
        <div id="left-hand" class="hand"></div>
        <div id="right-hand" class="hand"></div>
    </div>
    <a href="/hub.html">Back to Hub</a>

    <script src="/socket.io/socket.io.js"></script>
    <script src="../js/session.js"></script>
    <script>
        const socket = io();
        const leftHand = document.getElementById('left-hand');
        const rightHand = document.getElementById('right-hand');
        const sessionId = session.getSessionId();
        let controllers = [];

        if (sessionId) {
            socket.emit('join-session', sessionId);
        }

        socket.on('controller-joined', (controllerId) => {
            controllers.push(controllerId);
        });

        socket.on('sensor-update', (data) => {
            const controllerIndex = controllers.indexOf(data.mobileSocketId);
            if (controllerIndex === 0) { // Left hand
                const { beta } = data.rotationRate;
                leftHand.style.transform = `translateY(${beta}px)`;
            } else if (controllerIndex === 1) { // Right hand
                const { beta } = data.rotationRate;
                rightHand.style.transform = `translateY(${beta}px)`;
            }
        });
    </script>
</body>
</html>
